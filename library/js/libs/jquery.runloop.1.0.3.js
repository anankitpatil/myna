(function(e){e.runloop=function(t){var n={roundType:"floor",base:5};if(t)e.extend(n,t);var r="1.0.3",i=document.createElement("div"),s={},o={},u=false,a=false,f=0,l,c=function(e){var t=parseInt(e.toString().match(/[0-9]+/g),0);return isNaN(t)?false:"at"+t};return l={isPlaying:false,addKey:function(e,t){var n=c(e);if(n){var r=s[n];if(typeof s[n]!="function"){s[n]=t}else{s[n]=function(){if(r){r()}t()}}}},removeKey:function(e){var t=c(e);if(t){delete s[t]}},addMap:function(e){for(var t in e){at=c(t);if(at&&typeof e[t]=="function"){this.addKey(at,e[t])}}},getMap:function(){return s},reset:function(){u=false;a=false;f=0;o={};e(i).css({top:0})},pause:function(){l.isPlaying=false;a=u-Math.round(u*(Math.floor(f)/100));e(i).stop()},play:function(t,r){if(l.isPlaying){return}l.isPlaying=true;t=parseInt(t,0)||500;if(t<500){n.base=10}if(a){t=a;e(i).css("top",Math.floor(f))}if(typeof r=="function"){this.addKey("100%",r)}u=t;e(i).animate({top:"100"},{duration:t,step:function(e){f=e;if(n.roundType=="round"){e=Math.round(e/n.base)*n.base}else{e=Math.floor(e/n.base)*n.base}if(!(e in o)&&s["at"+e]){o[e]=true;s["at"+e]()}},easing:"linear",complete:function(){l.isPlaying=false;l.reset()}})}}}})(jQuery)